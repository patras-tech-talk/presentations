<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 350">
  <!-- Background -->
  <rect width="500" height="350" fill="#fff"/>

  <!-- Title -->
  <text x="250" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1a5490">Component Diagram - Order Service</text>

  <!-- Container boundary -->
  <rect x="30" y="40" width="440" height="280" rx="5" fill="none" stroke="#438dd5" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="40" y="58" font-family="Arial, sans-serif" font-size="10" fill="#438dd5" font-weight="bold">Order Service [Container: Spring Boot]</text>

  <!-- External: API Gateway (incoming) -->
  <rect x="10" y="90" width="70" height="45" rx="4" fill="#438dd5"/>
  <text x="45" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff" font-weight="bold">API</text>
  <text x="45" y="122" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff" font-weight="bold">Gateway</text>
  <text x="45" y="132" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" fill="#fff" opacity="0.9">[Container]</text>

  <!-- Order Controller -->
  <rect x="120" y="75" width="100" height="55" rx="4" fill="#85bbf0"/>
  <text x="170" y="97" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000" font-weight="bold">Order</text>
  <text x="170" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000" font-weight="bold">Controller</text>
  <text x="170" y="123" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#333">[Spring RestController]</text>

  <!-- Order Service (Logic) -->
  <rect x="120" y="160" width="100" height="55" rx="4" fill="#85bbf0"/>
  <text x="170" y="182" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000" font-weight="bold">Order</text>
  <text x="170" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000" font-weight="bold">Service</text>
  <text x="170" y="208" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#333">[Spring Service]</text>

  <!-- Payment Client -->
  <rect x="280" y="160" width="100" height="55" rx="4" fill="#85bbf0"/>
  <text x="330" y="182" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000" font-weight="bold">Payment</text>
  <text x="330" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000" font-weight="bold">Client</text>
  <text x="330" y="208" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#333">[Feign Client]</text>

  <!-- Order Repository -->
  <rect x="120" y="250" width="100" height="55" rx="4" fill="#85bbf0"/>
  <text x="170" y="272" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000" font-weight="bold">Order</text>
  <text x="170" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#000" font-weight="bold">Repository</text>
  <text x="170" y="298" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#333">[Spring Data JPA]</text>

  <!-- External: Payment Gateway -->
  <rect x="420" y="160" width="70" height="55" rx="4" fill="#999"/>
  <text x="455" y="182" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff" font-weight="bold">Payment</text>
  <text x="455" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff" font-weight="bold">Gateway</text>
  <text x="455" y="208" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" fill="#fff" opacity="0.9">[External]</text>

  <!-- External: Database -->
  <ellipse cx="170" cy="335" rx="50" ry="20" fill="#438dd5"/>
  <text x="170" y="332" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff" font-weight="bold">Order DB</text>
  <text x="170" y="344" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" fill="#fff" opacity="0.9">[PostgreSQL]</text>

  <!-- Arrows -->
  <defs>
    <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- API Gateway to Controller -->
  <line x1="80" y1="112" x2="115" y2="105" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
  <text x="95" y="98" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" fill="#666">HTTP</text>

  <!-- Controller to Service -->
  <line x1="170" y1="130" x2="170" y2="155" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
  <text x="185" y="145" text-anchor="start" font-family="Arial, sans-serif" font-size="6" fill="#666">Uses</text>

  <!-- Service to Payment Client -->
  <line x1="220" y1="187" x2="275" y2="187" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
  <text x="248" y="182" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" fill="#666">Uses</text>

  <!-- Service to Repository -->
  <line x1="170" y1="215" x2="170" y2="245" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
  <text x="185" y="232" text-anchor="start" font-family="Arial, sans-serif" font-size="6" fill="#666">Uses</text>

  <!-- Payment Client to Payment Gateway -->
  <line x1="380" y1="187" x2="415" y2="187" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
  <text x="398" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" fill="#666">HTTPS</text>

  <!-- Repository to Database -->
  <line x1="170" y1="305" x2="170" y2="312" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
  <text x="185" y="312" text-anchor="start" font-family="Arial, sans-serif" font-size="6" fill="#666">JDBC</text>
</svg>
